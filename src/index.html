<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

    <title>Where am I</title>
    <style media="screen">
      .bg-black {
        background-color:#111;
      }

    </style>
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>    <script type="text/javascript">

    function getLocation() {
          if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(showPosition);
          } else {
            document.getElementById("map").innerHTML = "Geolocation is not supported by this browser.";
          }
}

    function showPosition(position) {

          $('#map').html('<iframe width="100%" height="100%" style="position:fixed; top:0; left:0; bottom:0; right:0; width:100%; height:100%;width: 94%; height: 85% ;margin:3% ; border-radius:35px;" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" src="https://www.openstreetmap.org/export/embed.html?bbox=11.305875778198242%2C44.47703334312532%2C11.408014297485353%2C44.520560788605586&amp;layer=mapnik&amp;marker='+position.coords.latitude+'%2C'+position.coords.longitude+'"></iframe>');
        }

        $('#myPosition').click(function() {
          getLocation();
        });

        $(document).ready(function() {
          getLocation();
        });


        // Grab elements, create settings, etc.
        var video = document.getElementById('video');

        // Get access to the camera!
        if(navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {
            // Not adding `{ audio: true }` since we only want video now
            navigator.mediaDevices.getUserMedia({ video: true }).then(function(stream) {
                //video.src = window.URL.createObjectURL(stream);
                video.srcObject = stream;
                video.play();
            });
        }

        /* Legacy code below: getUserMedia
        else if(navigator.getUserMedia) { // Standard
            navigator.getUserMedia({ video: true }, function(stream) {
                video.src = stream;
                video.play();
            }, errBack);
        } else if(navigator.webkitGetUserMedia) { // WebKit-prefixed
            navigator.webkitGetUserMedia({ video: true }, function(stream){
                video.src = window.webkitURL.createObjectURL(stream);
                video.play();
            }, errBack);
        } else if(navigator.mozGetUserMedia) { // Mozilla-prefixed
            navigator.mozGetUserMedia({ video: true }, function(stream){
                video.srcObject = stream;
                video.play();
            }, errBack);
        }
        */

        // Elements for taking the snapshot
var canvas = document.getElementById('canvas');
var context = canvas.getContext('2d');
var video = document.getElementById('video');

// Trigger photo take
document.getElementById("snap").addEventListener("click", function() {
	context.drawImage(video, 0, 0, 640, 480);
});

  </script>
  </head>
  <body class="bg-black">


    <div id="map" style=" border-radius:50px;">
      <iframe id="frameMap" width="425" height="350" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" src="https://www.openstreetmap.org/export/embed.html?bbox=11.305875778198242%2C44.47703334312532%2C11.408014297485353%2C44.520560788605586&amp;layer=mapnik&amp;" style="position:fixed; top:0; left:0; bottom:0; right:0; width:100%; height:100%;width: 90%; height: 50% ;margin:5% ; border-radius:35px;"></iframe>
    </div>

    <div >
      <video id="video" width="640" height="480" autoplay></video>
      <button id="snap">Snap Photo</button>
      <canvas id="canvas" width="640" height="480"></canvas>
    </div>
<footer style="position:fixed; bottom:0px !important;" class=" container-fluid">
  <nav class="bg-black navbar navbar-expand-lg navbar-dark container-fluid" style="@media only screen
and (min-device-width : 375px)
and (max-device-width : 812px)
and (-webkit-device-pixel-ratio : 3) { padding:5% !important;};border-radius:35px; padding-left:4%;" >
  <a class="navbar-brand" href="#" style="color:#fff">Where am I</a>
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>
  <div class="collapse navbar-collapse" id="navbarNav" >
    <ul class="navbar-nav" >
      <li class="nav-item active">

        <a id="myPosition" class="nav-link" href="#" style="color:#fff" onclick="getLocation()">La mia posizione <span class="sr-only" >(current)</span></a>
      </li>
      <li class="nav-item">
        <a id="takePic" class="nav-link" href="#" style="color:#fff">Scatta</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="#" style="color:#fff">Pricing</a>
      </li>
      <li class="nav-item">
        <a class="nav-link disabled" href="#" tabindex="-1" aria-disabled="true" style="color:#fff">Disabled</a>
      </li>
    </ul>
  </div>
</nav>
</footer>

    <!-- Optional JavaScript -->


  </body>
</html>
